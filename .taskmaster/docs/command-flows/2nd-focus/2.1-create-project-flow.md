# /create-project [name] Command Flow Trace

> **Purpose**: Scaffolds a new project across all systems. Creates/links GitHub repo, initializes Linear project from template, sets up local folder structure, creates Graphiti group, and optionally initializes TaskMaster.

---

## Overview

| Property | Value |
|----------|-------|
| **Command** | `/create-project [name]` |
| **Spawns Agent** | Yes - `project-creator` |
| **Complexity** | High (multi-system scaffolding, error recovery) |
| **Write Operations** | GitHub repo creation, Linear project creation, Graphiti group, local files |

| Feature                  | Obsidian Read | Obsidian Write | Linear Read | Linear Write | Graphiti Read | Graphiti Write | GitHub Read | GitHub Write | Git Read |
| -------------------------- | --------------- | ---------------- | ------------- | -------------- | --------------- | ---------------- | ------------- | -------------- | ---------- |
| `/create-project [name]` |               |                |             | ✅           |               | ✅             |             | ✅           |          |

---

## Critical Safety Note

**This command creates resources in external systems:**

- **GitHub**: May create new repository (requires explicit approval)
- **Linear**: Creates new project (requires explicit approval)
- **Local**: Creates directory structure (auto-approved, low risk)
- **Graphiti**: Creates group entry (auto-approved, low risk)

All external system writes require explicit user confirmation before execution.

---

## Flow Diagram

```
User: /create-project "PE Evaluation"
         │
         ▼
┌─────────────────────────────────────────┐
│  COMMAND: create-project.md             │
│                                         │
│  1. Parse argument: project name        │
│  2. Validate name format                │
│  3. Generate slug: "pe-evaluation"      │
│  4. Spawn agent: project-creator        │
└────────────────┬────────────────────────┘
                 │
                 ▼
┌─────────────────────────────────────────┐
│  AGENT: project-creator                 │
│  (200K context)                         │
│                                         │
│  Activated Skills:                      │
│  - linear-integration (write)           │
│  - graphiti-memory (write)              │
│  - github-integration (write)           │
│  - project-context                      │
└────────────────┬────────────────────────┘
                 │
                 ▼
┌─────────────────────────────────────────┐
│  PHASE 1: Check for Existing Resources  │
│                                         │
│  GITHUB:                                │
│  Tool: mcp__MCP_DOCKER__search_repositories
│  Params: {query: "pe-evaluation"}       │
│  → Check if repo already exists         │
│                                         │
│  LINEAR:                                │
│  Tool: mcp__linear__list_projects       │
│  Params: {}                             │
│  → Check if project already exists      │
│                                         │
│  LOCAL:                                 │
│  Tool: Bash(ls:*)                       │
│  Params: ~/RS42/                        │
│  → Check if directory exists            │
│                                         │
│  GRAPHITI:                              │
│  Tool: mcp__graphiti__search_nodes      │
│  Params: {                              │
│    query: "pe-evaluation",              │
│    group_ids: ["work"]                  │
│  }                                      │
│  → Check for existing project entity    │
└────────────────┬────────────────────────┘
                 │
                 ▼
┌─────────────────────────────────────────┐
│  PHASE 2: Generate Scaffolding Plan     │
│  ═══════════════════════════════════════│
│  BATCH APPROVAL PATTERN                 │
│  ═══════════════════════════════════════│
│                                         │
│  ## Project Creation Plan               │
│                                         │
│  **Project**: PE Evaluation             │
│  **Slug**: pe-evaluation                │
│                                         │
│  ### Resources to Create                │
│                                         │
│  - [ ] **GitHub Repository** (NEW)      │
│        Name: pe-evaluation              │
│        Visibility: Private              │
│        Initialize with README           │
│                                         │
│  - [ ] **Linear Project** (NEW)         │
│        Name: PE Evaluation              │
│        Team: RS42                        │
│        Template: Standard Project       │
│                                         │
│  - [ ] **Local Directory**              │
│        Path: ~/RS42/pe-evaluation/      │
│        Structure:                       │
│        ├── .claude/settings.json        │
│        ├── .taskmaster/docs/            │
│        ├── CLAUDE.md                    │
│        ├── README.md                    │
│        └── src/                         │
│                                         │
│  - [ ] **Graphiti Group**               │
│        Group ID: work:pe-evaluation     │
│        Initial fact: Project created    │
│                                         │
│  ### Optional                           │
│                                         │
│  - [ ] Initialize TaskMaster?           │
│  - [ ] Link existing GitHub repo?       │
│        (instead of creating new)        │
│                                         │
│  **Proceed with creation? (yes/no):**   │
│                                         │
│  ⏸️  WAITING FOR USER CONFIRMATION      │
└────────────────┬────────────────────────┘
                 │
        User confirms (+ options)
                 │
                 ▼
┌─────────────────────────────────────────┐
│  PHASE 3: Create GitHub Repository      │
│  (if approved)                          │
│                                         │
│  Tool: mcp__MCP_DOCKER__create_repository
│  Params: {                              │
│    name: "pe-evaluation",               │
│    description: "PE Evaluation project",│
│    private: true,                       │
│    autoInit: true                       │
│  }                                      │
│  → Returns: repo URL                    │
│                                         │
│  OR if linking existing:                │
│                                         │
│  Tool: mcp__MCP_DOCKER__get_file_contents
│  Params: {                              │
│    owner: "...",                        │
│    repo: "pe-evaluation",               │
│    path: "README.md"                    │
│  }                                      │
│  → Verify repo exists and is accessible │
└────────────────┬────────────────────────┘
                 │
                 ▼
┌─────────────────────────────────────────┐
│  PHASE 4: Create Linear Project         │
│                                         │
│  Tool: mcp__linear__get_team            │
│  Params: {query: "RS42"}                │
│  → Get team ID                          │
│                                         │
│  Tool: mcp__linear__create_project      │
│  Params: {                              │
│    name: "PE Evaluation",               │
│    team: "RS42",                        │
│    description: "# Project Overview     │
│                                         │
│      ### Repository                     │
│      **GitHub**: [repo-url]             │
│                                         │
│      ### Goal                           │
│      [To be defined]                    │
│                                         │
│      ## Development Roadmap             │
│      ### Phase 1: Setup                 │
│      - Initial scaffolding              │
│    "                                    │
│  }                                      │
│  → Returns: project ID, URL             │
└────────────────┬────────────────────────┘
                 │
                 ▼
┌─────────────────────────────────────────┐
│  PHASE 5: Create Local Structure        │
│                                         │
│  Tool: Bash(mkdir:*)                    │
│  Params: -p ~/RS42/pe-evaluation/src    │
│  → Create directory tree                │
│                                         │
│  Tool: Bash(mkdir:*)                    │
│  Params: -p ~/RS42/pe-evaluation/.claude│
│                                         │
│  Tool: Bash(mkdir:*)                    │
│  Params: -p ~/RS42/pe-evaluation/       │
│          .taskmaster/docs               │
│                                         │
│  Create files via Write tool:           │
│                                         │
│  Write: CLAUDE.md                       │
│  Content:                               │
│  ```                                    │
│  # PE Evaluation                        │
│                                         │
│  **Linear Project**: [link]             │
│  **GitHub Repo**: [link]                │
│  **Graphiti Group**: work:pe-evaluation │
│                                         │
│  ## Project Context                     │
│  [To be defined]                        │
│  ```                                    │
│                                         │
│  Write: .claude/settings.json           │
│  Content: Default settings              │
│                                         │
│  Write: README.md                       │
│  Content: Basic project readme          │
└────────────────┬────────────────────────┘
                 │
                 ▼
┌─────────────────────────────────────────┐
│  PHASE 6: Initialize Git                │
│  (if new directory)                     │
│                                         │
│  Tool: Bash(git init:*)                 │
│  Path: ~/RS42/pe-evaluation             │
│                                         │
│  Tool: Bash(git remote add:*)           │
│  Params: origin [github-url]            │
│                                         │
│  (Note: Does NOT push - user controls)  │
└────────────────┬────────────────────────┘
                 │
                 ▼
┌─────────────────────────────────────────┐
│  PHASE 7: Create Graphiti Group         │
│                                         │
│  Tool: mcp__graphiti__add_memory        │
│  Params: {                              │
│    name: "Project Created: PE Eval",    │
│    episode_body: "Created new project   │
│      PE Evaluation. GitHub: [url].      │
│      Linear: [url]. Local: [path].",    │
│    group_id: "work:pe-evaluation",      │
│    source: "text",                      │
│    source_description: "create-project" │
│  }                                      │
│  → Establishes group with initial fact  │
└────────────────┬────────────────────────┘
                 │
                 ▼
┌─────────────────────────────────────────┐
│  PHASE 8: Optional TaskMaster Init      │
│  (if user selected)                     │
│                                         │
│  Tool: mcp__taskmaster-ai__initialize_project
│  Params: {                              │
│    projectRoot: "~/RS42/pe-evaluation"  │
│  }                                      │
│  → Creates .taskmaster structure        │
│                                         │
│  Prompt user for PRD:                   │
│  "Would you like to create an initial   │
│   PRD for task generation?"             │
└────────────────┬────────────────────────┘
                 │
                 ▼
┌─────────────────────────────────────────┐
│  OUTPUT: Creation Summary               │
│                                         │
│  ## Project Created: PE Evaluation      │
│                                         │
│  ### Resources Created                  │
│                                         │
│  ✅ **GitHub Repository**               │
│     [github.com/.../pe-evaluation]      │
│                                         │
│  ✅ **Linear Project**                  │
│     [linear.app/.../PE-Evaluation]      │
│                                         │
│  ✅ **Local Directory**                 │
│     ~/RS42/pe-evaluation/               │
│     ├── .claude/settings.json           │
│     ├── .taskmaster/docs/               │
│     ├── CLAUDE.md                       │
│     ├── README.md                       │
│     └── src/                            │
│                                         │
│  ✅ **Graphiti Group**                  │
│     work:pe-evaluation                  │
│                                         │
│  ✅ **TaskMaster** (if selected)        │
│     Initialized, ready for PRD          │
│                                         │
│  ### Next Steps                         │
│  1. cd ~/RS42/pe-evaluation             │
│  2. Update CLAUDE.md with project goals │
│  3. Create PRD in .taskmaster/docs/     │
│  4. Run /project-brief to verify setup  │
└─────────────────────────────────────────┘
```

---

## Tool Calls Summary

### Read Operations (Auto-Allowed)

| Tool | Purpose | Parameters |
|------|---------|------------|
| `mcp__MCP_DOCKER__search_repositories` | Check existing repo | `{query: "..."}` |
| `mcp__linear__list_projects` | Check existing project | - |
| `Bash(ls:*)` | Check existing directory | - |
| `mcp__graphiti__search_nodes` | Check existing group | `{group_ids: ["work"]}` |
| `mcp__linear__get_team` | Get team ID | `{query: "RS42"}` |

### Write Operations (Require Approval)

| Tool | Purpose | Approval |
|------|---------|----------|
| `mcp__MCP_DOCKER__create_repository` | Create GitHub repo | **EXPLICIT** |
| `mcp__linear__create_project` | Create Linear project | **EXPLICIT** |
| `Bash(mkdir:*)` | Create directories | Auto (local, low risk) |
| `Write` | Create config files | Auto (local, low risk) |
| `Bash(git init:*)` | Initialize git repo | Auto (local, low risk) |
| `Bash(git remote add:*)` | Link remote | Auto (no network op) |
| `mcp__graphiti__add_memory` | Create group entry | Auto (low risk) |
| `mcp__taskmaster-ai__initialize_project` | Init TaskMaster | Optional, explicit |

---

## Skills Required

| Skill | Why Needed |
|-------|------------|
| `linear-integration` | Create project with template |
| `graphiti-memory` | Create group entry |
| `github-integration` | Create or link repository |
| `project-context` | Validate naming, generate slug |

---

## Error Handling

| Scenario | Handling |
|----------|----------|
| GitHub repo exists | Offer to link instead of create |
| Linear project exists | Offer to link instead of create |
| Directory exists | Ask to use existing or abort |
| GitHub creation fails | Report error, continue with other resources |
| Linear creation fails | Report error, continue with other resources |
| Partial failure | Report what succeeded, what failed, how to retry |

---

## Templates

### Linear Project Description Template

```markdown
# Project Overview

### Repository
**GitHub**: [repo-url]

### Goal
[Transform X into Y using Z]

### Target Users
- [User type]

### Platform & Distribution
- **Platform**: [tech stack]
- **Deployment**: [method]

## Success Criteria
- [ ] Criterion 1
- [ ] Criterion 2

## Development Roadmap

### Phase 1: Foundation [Not Started]
- [ ] Initial setup and scaffolding
- [ ] Core architecture design

### Phase 2: Implementation [Not Started]
- [ ] Feature A
- [ ] Feature B

### Phase 3: Polish [Not Started]
- [ ] Testing
- [ ] Documentation
```

### CLAUDE.md Template

```markdown
# [Project Name]

**Linear Project**: [linear-link]
**GitHub Repo**: [github-link]
**Graphiti Group**: work:[slug]

## Project Context

[Brief description of what this project does]

## Key Decisions

[Important architectural or design decisions]

## Development Notes

[Any context useful for AI assistance]
```

---

## Example Output

```markdown
## Project Created: PE Evaluation

### Resources Created

✅ **GitHub Repository**
   - URL: https://github.com/yandifarinango/pe-evaluation
   - Visibility: Private
   - Initialized with README

✅ **Linear Project**
   - URL: https://linear.app/rs42/project/pe-evaluation-xxx
   - Team: RS42
   - Template applied

✅ **Local Directory**
   ```
   ~/RS42/pe-evaluation/
   ├── .claude/
   │   └── settings.json
   ├── .taskmaster/
   │   └── docs/
   ├── CLAUDE.md
   ├── README.md
   └── src/
   ```

✅ **Graphiti Group**
   - Group ID: work:pe-evaluation
   - Initial fact recorded

✅ **Git Initialized**
   - Remote: origin → github.com/.../pe-evaluation
   - Note: Not pushed yet (you control when to push)

⏭️ **TaskMaster**: Skipped (not selected)

---

### Next Steps

1. Navigate to project:
   ```bash
   cd ~/RS42/pe-evaluation
   ```

2. Update CLAUDE.md with project goals

3. (Optional) Initialize TaskMaster:
   ```bash
   task-master init
   ```

4. (Optional) Create PRD and generate tasks:
   ```bash
   # Create .taskmaster/docs/prd.md
   task-master parse-prd .taskmaster/docs/prd.md
   ```

5. Verify setup:
   ```
   /project-brief "PE Evaluation"
   ```

---

### Quick Commands

- View project status: `/project-brief "PE Evaluation"`
- Sync progress: `/project-sync`
- Add task: Via Linear or TaskMaster
```
