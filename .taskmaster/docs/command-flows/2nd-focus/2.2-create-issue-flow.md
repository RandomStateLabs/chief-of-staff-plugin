# /create-issue Command Flow Trace

> **Purpose**: Create a templated Linear issue for the current project. Provides guided issue creation with standardized format, auto-detected project context, and type prefixes.

---

## Overview

| Property | Value |
|----------|-------|
| **Command** | `/create-issue` |
| **Spawns Agent** | No (single templated operation) |
| **Complexity** | Low (single write with approval) |
| **Write Operations** | Linear issue creation (explicit approval) |

| Feature                  | Obsidian Read | Obsidian Write | Linear Read | Linear Write | Graphiti Read | Graphiti Write | GitHub Read | GitHub Write | Git Read |
| -------------------------- | --------------- | ---------------- | ------------- | -------------- | --------------- | ---------------- | ------------- | -------------- | ---------- |
| `/create-issue`          |               |                |             | ✅           |               |                |             |              |          |

---

## Why No Agent?

This command is a guided single operation:

1. Template-based issue creation
2. No complex synthesis needed
3. Single Linear API call
4. User provides all inputs interactively

The skill provides templates and guidance; no agent context needed.

---

## Flow Diagram

```
User: /create-issue
         │
         ▼
┌─────────────────────────────────────────┐
│  COMMAND: create-issue.md               │
│                                         │
│  1. Load skill: project-context         │
│  2. Load skill: linear-integration      │
│  3. Detect current project              │
│  4. Handle directly (no agent)          │
└────────────────┬────────────────────────┘
                 │
                 ▼
┌─────────────────────────────────────────┐
│  PHASE 1: Detect Project Context        │
│                                         │
│  Tool: Bash(pwd:*)                      │
│  → Get current directory                │
│                                         │
│  Tool: Read                             │
│  Path: ./CLAUDE.md                      │
│  → Parse Linear project reference       │
│                                         │
│  Tool: mcp__linear__list_projects       │
│  → Verify project exists, get ID        │
│                                         │
│  Result:                                │
│  - project_name = "PE Evaluation"       │
│  - project_id = "abc123"                │
│  - team = "RS42"                        │
└────────────────┬────────────────────────┘
                 │
                 ▼
┌─────────────────────────────────────────┐
│  PHASE 2: Gather Issue Details          │
│  (Interactive prompts)                  │
│                                         │
│  "Creating issue for: PE Evaluation"    │
│                                         │
│  **Issue Type:**                        │
│  1. feat - New feature                  │
│  2. fix - Bug fix                       │
│  3. chore - Maintenance task            │
│  4. docs - Documentation                │
│  5. refactor - Code improvement         │
│  > [user selects: 1]                    │
│                                         │
│  **Title (without prefix):**            │
│  > [user enters: "Add user avatars"]    │
│                                         │
│  **Description (optional):**            │
│  > [user enters description]            │
│  > [or skips]                           │
│                                         │
│  **Priority:**                          │
│  1. Urgent                              │
│  2. High                                │
│  3. Normal (default)                    │
│  4. Low                                 │
│  > [user selects: 3]                    │
│                                         │
│  **Labels (optional, comma-separated):**│
│  > [user enters: "frontend, ui"]        │
│  > [or skips]                           │
└────────────────┬────────────────────────┘
                 │
                 ▼
┌─────────────────────────────────────────┐
│  PHASE 3: Generate Issue Preview        │
│                                         │
│  ## Issue Preview                       │
│                                         │
│  **Title**: feat: Add user avatars      │
│  **Project**: PE Evaluation             │
│  **Team**: RS42                         │
│  **Priority**: Normal                   │
│  **Labels**: frontend, ui               │
│                                         │
│  **Description**:                       │
│  ```                                    │
│  ## Context                             │
│  [User provided description]            │
│                                         │
│  ## Acceptance Criteria                 │
│  - [ ] [to be defined]                  │
│                                         │
│  ## Technical Notes                     │
│  [to be added during implementation]    │
│  ```                                    │
│                                         │
│  **Create this issue? (yes/no/edit):**  │
│                                         │
│  ⏸️  WAITING FOR USER CONFIRMATION      │
└────────────────┬────────────────────────┘
                 │
        User confirms
                 │
                 ▼
┌─────────────────────────────────────────┐
│  PHASE 4: Create Linear Issue           │
│                                         │
│  Tool: mcp__linear__create_issue        │
│  Params: {                              │
│    title: "feat: Add user avatars",     │
│    team: "RS42",                        │
│    project: "PE Evaluation",            │
│    description: "[formatted template]", │
│    priority: 3,                         │
│    labels: ["frontend", "ui"]           │
│  }                                      │
│  → Returns: issue ID, URL               │
└────────────────┬────────────────────────┘
                 │
                 ▼
┌─────────────────────────────────────────┐
│  OUTPUT: Creation Confirmation          │
│                                         │
│  ✅ Issue Created                       │
│                                         │
│  **ID**: RS4-456                        │
│  **Title**: feat: Add user avatars      │
│  **URL**: [Linear link]                 │
│                                         │
│  **Quick Actions**:                     │
│  - View in Linear: [link]               │
│  - Create another: /create-issue        │
│  - View project: /project-brief         │
└─────────────────────────────────────────┘
```

---

## Inline Mode (Quick Creation)

For experienced users who want to skip prompts:

```bash
/create-issue feat "Add user avatars" --priority=high --labels=frontend,ui
```

This creates the issue immediately with confirmation.

---

## Tool Calls Summary

### Read Operations (Auto-Allowed)

| Tool | Purpose | Parameters |
|------|---------|------------|
| `Bash(pwd:*)` | Current directory | - |
| `Read` | CLAUDE.md context | `{file_path: "./CLAUDE.md"}` |
| `mcp__linear__list_projects` | Verify project | - |
| `mcp__linear__list_issue_labels` | Available labels | `{team: "RS42"}` |

### Write Operations (Require Approval)

| Tool | Purpose | Approval |
|------|---------|----------|
| `mcp__linear__create_issue` | Create the issue | **EXPLICIT** |

---

## Skills Required

| Skill | Why Needed |
|-------|------------|
| `project-context` | Detect current project |
| `linear-integration` | Issue creation with templates |

---

## Issue Type Prefixes

| Type | Prefix | Use For |
|------|--------|---------|
| Feature | `feat:` | New functionality |
| Bug Fix | `fix:` | Fixing broken behavior |
| Chore | `chore:` | Maintenance, dependencies |
| Documentation | `docs:` | Documentation updates |
| Refactor | `refactor:` | Code improvements |
| Test | `test:` | Adding/fixing tests |
| Style | `style:` | Formatting, linting |
| Perf | `perf:` | Performance improvements |

---

## Issue Description Template

```markdown
## Context

[Brief description of why this issue exists]

## Acceptance Criteria

- [ ] Criterion 1
- [ ] Criterion 2
- [ ] Criterion 3

## Technical Notes

[Implementation details, constraints, or considerations]

## Related

- [Links to related issues, PRs, or notes]

---
*Created via /create-issue*
```

---

## Error Handling

| Scenario | Handling |
|----------|----------|
| Project not detected | Prompt user to select from list |
| Label doesn't exist | Offer to create it or skip |
| User cancels | Exit gracefully, no issue created |
| Linear API error | Report error, suggest retry |

---

## Example Interaction

```
User: /create-issue

Claude: Creating issue for: **PE Evaluation** (RS42)

**Select issue type:**
1. feat - New feature
2. fix - Bug fix
3. chore - Maintenance
4. docs - Documentation
5. refactor - Code improvement

> 1

**Enter title (without prefix):**
> Add user profile avatars

**Enter description (optional, press Enter to skip):**
> Allow users to upload and display profile avatars.
> Should support PNG, JPG, and WebP formats.
> Max size 2MB.

**Select priority:**
1. Urgent  2. High  3. Normal  4. Low

> 2

**Labels (comma-separated, or Enter to skip):**
> frontend, user-profile

---

## Issue Preview

**Title**: feat: Add user profile avatars
**Project**: PE Evaluation
**Team**: RS42
**Priority**: High
**Labels**: frontend, user-profile

**Description**:
```markdown
## Context

Allow users to upload and display profile avatars.
Should support PNG, JPG, and WebP formats.
Max size 2MB.

## Acceptance Criteria

- [ ] [to be defined]

## Technical Notes

[to be added during implementation]
```

**Create this issue? (yes/no/edit):** yes

---

✅ **Issue Created**

**ID**: RS4-789
**Title**: feat: Add user profile avatars
**URL**: https://linear.app/rs42/issue/RS4-789

**Quick Actions**:
- [View in Linear](link)
- Create another: /create-issue
- View project: /project-brief "PE Evaluation"
```
